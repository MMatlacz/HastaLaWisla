<!DOCTYPE html>
<html ng-app="lawista">
<head>
    <script src="https://code.angularjs.org/1.4.7/angular.min.js"></script>
    <script src="https://code.angularjs.org/1.4.7/angular-animate.min.js"></script>
    <meta name="viewport"
          content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width">
    <title>HastaLaWisla</title>
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/main.css" rel="stylesheet">
    <link href="css/semantic.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/swipebox.css">
    <meta charset="utf-8">
</head>
<body>

<script src="http://code.jquery.com/jquery.min.js"></script>
<script src="js/shared/jquery.swipebox.min.js"></script>
<script src="js/shared/handlebars-v4.0.5.js"></script>
<script src="js/shared/semantic.min.js"></script>

<script src="js/main.js"></script>
<script src="js/buttons_handler.js"></script>


<script type="text/javascript"
        src="http://maps.googleapis.com/maps/api/js?v=3&key=AIzaSyC0fyRGllwPtxZdknHd_nPYAuloCYIiF_0&sensor=false&libraries=places"></script>

<script src="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobubble/src/infobubble.js"></script>
<script type="text/javascript">
    ;( function( $ ) {
        $( '.swipebox' ).swipebox();
    } )( jQuery );

    var data_for_details_view = {
        name: 'Cud nad Wisłą',
        description: 'Piękne miejsce ale niestety mocno niedoceniane przez Japończyków.',
        website: 'http://www.cudnadwisla.pl',
        hours: '9-17',
        photos: ["img/photos/default.jpg","img/photos/default.jpg","img/photos/default.jpg"],
        background: "img/photos/default.jpg"
    };

    var data_for_menu_view = {
        title: 'Hasta la Wisła, bejbe',
        gastronomy_label: 'Gastronomia',
        sport_label: 'Ruch',
        music_and_dance_label: 'Muzyka & Taniec',
        info_label: 'Informacje praktyczne',
        nature_label: 'Natura',
        costam_label: 'Cośtam'

    };

    var getData = function (view) {
        if (view == 'details')
            return data_for_details_view;
        else if (view == 'menu')
            return data_for_menu_view;
        else
            return null;
    };

    var switchView = function(from, to) {
        var tmpl = Handlebars.getTemplate(to+'-screen');
        var rendered = tmpl(getData(to));

        $("body").append(rendered);
        $("#"+to+"-screen").css('display','none');
        $("#"+from+"-screen").fadeOut();
        $("#"+to+"-screen").fadeIn({queue: false});


        // Possible scenarios
        if (from == 'main' && to == 'menu') {
            $("#main-screen").remove();
            $("#menu-screen #back-link").bind('click', function () {
                switchView('menu', 'main');
            });
        } else if (from == 'menu' && to == 'main') {
            $("#menu-screen").remove();
            $("#main-screen #header a").bind('click', function () {
                switchView('main', 'menu');
            });
            initMap();
        } else if (from == 'main' && to == 'details') {

        } else if (from == 'details' && to == 'main') {

        }
    };

    switchView('','main');
    $("#main-screen #header a").bind('click', function () {
        switchView('main', 'menu');
    });

</script>
</body>
</html>
